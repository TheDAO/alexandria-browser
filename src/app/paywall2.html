<!doctype html>
<html>

<head>
    <title></title>
    <meta charset="utf-8" />
    <script type="emacs-lisp">
        (progn (setq httpd-port 8001) (httpd-start) (impatient-mode))
    </script>
    <script type="text/javascript">
     /* hacks */
     window.IPFSHost = 'http://ipfs.alexandria.media/ipfs/'
    </script>

    <script src="vendor/jquery/dist/jquery.min.js"></script>
    <script src="vendor/moment/min/moment.min.js"></script>
    <link rel="stylesheet" href="css/fonts.css">
    <link rel="stylesheet" href="css/normalize.min.css">
    <!--		<link rel="stylesheet" href="//code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css"> -->
    <link rel="stylesheet" href="css/alexandria.css">
    <link rel="stylesheet" href="css/media.css">

    <style>
     .playbar {
         width: 100%;
         height: 50px;
     }

     #playbar-container {
         position: relative;
     }

     .playbar-shadow {
         border-radius: 20px;
         background: rgba(200,200,200,0.8);
         height: 70px;
         position: absolute;
         top: -2px;
         margin: 10px 10px;
         overflow: hide;
         transition: all 0.2s;
     }
     .playbar-shadow.hide {
         transform: translate(0%, -5000%)
     }
     .playbar-shadow h2 {
         padding: 5px 25px;
     }
     .playbar .jp-play, .playbar .jp-stop {
         float: left;
         width: 67px;
         height: 67px;
         background: url("svg/play.svg");
         background-repeat: none;
         border: none;
     }

     .playbar .jp-stop{
         display: none;
         background: url("svg/stop.svg");
     }

     .playbar.jp-state-playing .jp-play{
         background: url("svg/pause.svg");
     }

     .playbar.jp-state-playing .jp-stop{
//         display: inherit;
     }

     .playbar .jp-current_time {
         float: left;
         width: 40px;
         text-align: center;
         line-height: 50px;
         height: 100%;
     }

     .playbar .jp-progress {
         height: 3px;
         float: left;
         margin-top: 23px;
         margin-left: 5px;
         width: calc( 100% - 50px - 50px - 50px - 10px);
         background-color: lightgrey;
     }

     .playbar .jp-seek-bar {
         height: 40px;
         margin-top: -20px;
         padding-top: 20px;
     }

     .playbar .jp-play-bar {
         background-color: #868686;
         height: 3px;
     }

     .playbar .jp-play-button {
         content: "";
         width: 10px;
         top: -8px;
         position: relative;
         border-radius: 100%;
         background-color: #868686;
         height: 10px;
     }

     .playbar .scrobble-bar p {
         line-height: 0px;
         /* hack to make it sit higher -- its 2:12 am ill fix this up later */
     }

     .playbar .jp-duration {
         float: right;
         line-height: 50px;
         padding-right: 20px;
         height: 100%;
     }

    </style>
</head>

<body>
    <script type="text/html" id="media-template">
     <div class="container">
        <div class="top">
            <div class="media-info">
                <h1 class="media-title">Title</h1>
                <div class="row">
                    <h2 class="media-meta">
                            <span class="media-artist">Artist</span>
                            <div class="tipbox">
                                <span class="tip">Tip</span>
                                <span class="share"><img src="./svg/share.svg"</span>
                            </div>
                        </h2>
                </div>
                <div class="row format-selector">
                    <button class="active">mp3</button>
                    <button>flac</button>
                </div>

                <ul class="release-info">
                    <li class="ri-publisher">publisher</li>
                    <li class="ri-btc-address">BTC address</li>
                    <li>Released <span class="ri-date">October 10, 2015</span></li>
                    <li><span class="ri-audio-count">0</span> Audio Track</li>
                    <li class="ri-runtime">runtime</li>
                    <li><span class="ri-xfile-count">2</span> extra files</li>
                </ul>

                <div class="pwwy-stuff">
                    <div class="pwyw-container pwyw-activate-pin">
                        <p>currently there are</p>
                        <div class="pwyw-pining-info pwyw-suggest">
                            <span class="pwyw-currently-pining">497</span> users pining this file
                        </div>
                        <div class="pwyw-pining-suggestion">
                            if you pin it, you can play the song for free!
                        </div>
                        <span class="pwyw-suggest">
                            $<span class="pwyw-pin-price pwyw-suggested-price">0.00</span> per play
                        </span>
                        <button>Pin It!</button>
                    </div>
                    <div class="pwyw-container pwyw-activate-download">
                        <div class="pwyw-paybox">
                            <div class="pwyw-payinfo">
                                <p>
                                    The suggested price is:
                                </p>
                                <span class="pwyw-suggest">
                                    $<span class="pwyw-price-suggest-download pwyw-suggested-price">suggest-dl</span> to buy
                                </span>
                                <span>
                                    $
     <input class="pwyw-usd-price-input pwyw-usd-download-price-input"> USD
                                </span>
                                </span>
                            </div>
                            <div class="pwyw-qrcode">
                                <img src="" />
                            </div>
                        </div>
                        <div class="pwyw-footer">
                            <span class="pwyw-btc-download-price">dl-price</span> uBTC to
                            <span class="pwyw-btc-address">                            </span>
                        </div>
                    </div>
                    <div class="pwyw-container pwyw-activate-play">
                        <div class="pwyw-paybox">
                            <div class="pwyw-payinfo">
                                <p>
                                    The suggested price is:
                                </p>
                                <span class="pwyw-suggest">
                                    $<span class="pwyw-price-suggest-play pwyw-suggested-price">suggest-play</span> to play
                                </span>
                                <span>
                                    $
     <input class="pwyw-usd-price-input pwyw-usd-play-price-input"> USD
                                </span>
                                </span>
                            </div>
                            <div class="pwyw-qrcode">
                                <img src="http://www.wired.com/images_blogs/magazine/2013/04/qrcode_f.jpg" />
                            </div>
                        </div>
                        <div class="pwyw-footer">
                            <span class="pwyw-btc-play-price">play-price</span> uBTC to
                            <span class="pwyw-btc-address">1CvDLWNzX4PEkzMU7t2pVGsT858pMiNorQ
                            </span>
                        </div>
                    </div>
                </div>
                <div class="buybox">
                    <ul class="pwyw-list">
                        <li class="pwyw-item pwyw-action-play">
                            <img class="button-svg" src="svg/paywall-play.svg" />
                            <span class="price">
                                $<span class="pwyw-price-play">play-price</span> to Play
                            </span>
                        </li>
                        <li class="pwyw-item pwyw-action-download">
                            <img class="button-svg" src="svg/paywall-download.svg" />
                            <span class="price">
                                $<span class="pwyw-price-download">dl-price</span> to Buy</span>
                        </li>
                        <li class="pwyw-item pwyw-action-pin">
                            <img class="button-svg" src="svg/paywall-pin.svg" />
                            <span class="price price-pin">
                                    Pin Album
                                </span>
                        </li>
                    </ul>
                </div>
                <div id="audio-player" class="jp-player"></div>
                <div id="playbar-container" class="jp-audio playbar" role="application" aria-label="media player">
                    <div class="jp-type-single">
                        <div class="jp-gui jp-interface">
                            <div class="jp-controls-holder">
                                <div class="jp-controls">
                                    <button class="jp-play" role="button" tabindex="0">play</button>
                                    <button class="jp-stop" role="button" tabindex="0">stop</button>
                                </div>
                                <div class="jp-progress">
                                    <div class="jp-seek-bar">
                                        <div class="jp-play-bar">
                                            <div class="jp-play-button"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="jp-current-time" role="timer" aria-label="time">&nbsp;</div>
                                <div class="jp-duration" role="timer" aria-label="duration">&nbsp;</div>
                                <div class="jp-toggles" style="display: none">
                                    <button class="jp-repeat" role="button" tabindex="0">repeat</button>
                                </div>
                            </div>
                        </div>
                        <div class="jp-details">
                            <div class="jp-title" aria-label="title">&nbsp;</div>
                        </div>
                        <div class="jp-no-solution">
                            <span>Update Required</span>
                            To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.
                        </div>
                    </div>
                    <div class="playbar-shadow">
                        <h2>
                            You need to pay the artist or pin the file/album in order to play this track !
                        </h2>
                    </div>
                </div>
            </div>
            <div class="media-cover">
                <img src="http://teamclermont.com/i/cover_placeholder.jpg" />
            </div>
        </div>
        <div class="bottom">
            <div class="playlist">
                <table class="playlist-table">
                    <thead>
                    <tr>
                        <th>#</th>
                        <th>Name</th>
                        <th>Artist</th>
                        <th>Time</th>
                        <th>Price/Play</th>
                        <th>Price/Buy</th>
                    </tr>
                    </thead>
                    <tbody class="playlist-tracks">
                        <tr>
                            <td>1</td>
                            <td>Tiny Human</td>
                            <td>Imogen Heap</td>
                            <td>3:39</td>
                            <td>$<span class="price-play">0.0125</span></td>
                            <td>$<span class="price-download">1.00</span></td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Another Tiny Human</td>
                            <td>Imogen Heap</td>
                            <td>3:19</td>
                            <td><span>$0.0025</span></td>
                            <td><span>$0.040</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    </script>
    <div id="media-browser"></div>
    <iframe id="my_iframe" style="display:none;"></iframe>
    <script src="js/vendor/jquery-2.1.1.min.js"></script>
    <script src="vendor/jplayer/dist/jplayer/jquery.jplayer.min.js "></script>
    <script src="js/media.js"></script>

    <script type="text/javascript">
     $('document').ready(function () {
         var data = {"status":"success","response":[{"media-data":{"alexandria-media":{"torrent":"QmZVxewtGhtXG28fSBx7vUYCJiKdJWF2vW6rrEAuTUSP7b","publisher":"FAiWWyUEuXkxo7oQLWfD3oTWkHM6eu5JJH","timestamp":1443939079000,"type":"music","info":{"title":"Tiny Human","description":"Tiny Human ISRCGBJPX1500151 Tiny Human (instrumental) ISRCGBJPX1500152 Published by Megaphonic Publishing Record label - Megaphonic Records copyright 2015 for information on use of sync please contact Info@imogenheap.com","year":2015,"extra-info":{"Bitcoin Address":"16diWTDN8DUxsX994WzyNAotVp36qBqXku","DHT Hash":"QmZVxewtGhtXG28fSBx7vUYCJiKdJWF2vW6rrEAuTUSP7b","artist":"Imogen Heap","collection":"Tiny Human","company":"Megaphonic Records","coverArt":"Imogen Heap - Tiny Human cover.jpg","filename":"Imogen Heap - Tiny Human.mp3","pwyw":"2,1","runtime":260,"tags":"Mycelia, Sennheiser","track02":"Imogen Heap - Tiny Human.flac"}},"payment":{"amount":"2,25,100","currency":"USD","type":"tip"},"extras":""},"signature":"H98wuBM8i6ZEvh4XMtA2YHBg6z3ndV9pPBGeprKe7T1HSLjAIJQh5hAEbuAbd5wxL3+eSBAebEB9T1EUnzlkNJY="},"txid":"048bff9ec5ab073e63779685fb5c0ee0fa37d709e488e3d380b949d9dd856a12","block":1398174,"publisher-name":"Imogen Heap"}]};
         window.doMountMediaBrowser('#media-browser', data);

         $('#audio-player').jPlayer({
             cssSelectorAncestor: "#playbar-container",
             swfPath: "/js",
             supplied: "m4a, oga",
             useStateClassSkin: true,
             autoBlur: false,
             smoothPlayBar: true,
             keyEnabled: true,
             remainingDuration: true,
             toggleDuration: true
         })
     })

    </script>
</body>

</html>
